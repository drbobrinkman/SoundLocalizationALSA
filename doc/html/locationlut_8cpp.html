<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.8"/>
<title>SoundLocalizationALSA: locationlut.cpp File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">SoundLocalizationALSA
   </div>
   <div id="projectbrief">Sound location data provided as a simple web service</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.8 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">locationlut.cpp File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &quot;<a class="el" href="locationlut_8h_source.html">locationlut.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="spherepoints_8h_source.html">spherepoints.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="utils_8h_source.html">utils.h</a>&quot;</code><br />
<code>#include &lt;iostream&gt;</code><br />
<code>#include &lt;iomanip&gt;</code><br />
<code>#include &lt;fstream&gt;</code><br />
<code>#include &lt;vector&gt;</code><br />
<code>#include &lt;cmath&gt;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for locationlut.cpp:</div>
<div class="dyncontent">
<div class="center"><img src="locationlut_8cpp__incl.png" border="0" usemap="#locationlut_8cpp" alt=""/></div>
<map name="locationlut_8cpp" id="locationlut_8cpp">
<area shape="rect" id="node2" href="locationlut_8h.html" title="locationlut.h" alt="" coords="167,80,259,107"/><area shape="rect" id="node7" href="spherepoints_8h.html" title="spherepoints.h" alt="" coords="334,80,441,107"/><area shape="rect" id="node8" href="utils_8h.html" title="utils.h" alt="" coords="465,80,523,107"/><area shape="rect" id="node6" href="constants_8h.html" title="constants.h" alt="" coords="243,155,334,181"/></map>
</div>
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a10eee00d800c82c823371b1d705eaece"><td class="memItemLeft" align="right" valign="top">std::vector&lt; float &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="locationlut_8cpp.html#a10eee00d800c82c823371b1d705eaece">offsetsForLocation</a> (std::vector&lt; float &gt; pt)</td></tr>
<tr class="separator:a10eee00d800c82c823371b1d705eaece"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:ade2ea6a01089d53d8b6811b9bf521b2f"><td class="memItemLeft" align="right" valign="top">constexpr float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="locationlut_8cpp.html#ade2ea6a01089d53d8b6811b9bf521b2f">SENSOR_SPACING_METERS</a> = <a class="el" href="constants_8h.html#af864305e5976cac5de959897d2031001">SENSOR_SPACING_INCHES</a>*<a class="el" href="constants_8h.html#ad7c3634d1f0dc7d99360b5956f19c330">METERS_PER_INCH</a></td></tr>
<tr class="separator:ade2ea6a01089d53d8b6811b9bf521b2f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4742b1e4d3aaead5dfffb573027fddc2"><td class="memItemLeft" align="right" valign="top">constexpr float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="locationlut_8cpp.html#a4742b1e4d3aaead5dfffb573027fddc2">SPEED_OF_SOUND_SAMPLES_PER_METER</a></td></tr>
<tr class="separator:a4742b1e4d3aaead5dfffb573027fddc2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a157ea385f7bd4c903579d7369fa47d6c"><td class="memItemLeft" align="right" valign="top">constexpr float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="locationlut_8cpp.html#a157ea385f7bd4c903579d7369fa47d6c">SIN_60</a> = 0.86602540378f</td></tr>
<tr class="separator:a157ea385f7bd4c903579d7369fa47d6c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac324f5e99785ca5b85f73eaef75dc94a"><td class="memItemLeft" align="right" valign="top">constexpr float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="locationlut_8cpp.html#ac324f5e99785ca5b85f73eaef75dc94a">TAN_60</a> = 1.73205080757f</td></tr>
<tr class="separator:ac324f5e99785ca5b85f73eaef75dc94a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa48e29ff287b35f81743235e2e483934"><td class="memItemLeft" align="right" valign="top">std::vector&lt; std::vector&lt; float &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="locationlut_8cpp.html#aa48e29ff287b35f81743235e2e483934">MIC_LOCATIONS</a></td></tr>
<tr class="separator:aa48e29ff287b35f81743235e2e483934"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8d3665864164bf85a14100b11dbba1f5"><td class="memItemLeft" align="right" valign="top">constexpr char&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="locationlut_8cpp.html#a8d3665864164bf85a14100b11dbba1f5">FNAME</a> [] = &quot;lut.csv&quot;</td></tr>
<tr class="separator:a8d3665864164bf85a14100b11dbba1f5"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Data structure for mapping sounds delays to directions.</p>
<p>We have 4 microphones, and we can calculate the signal delay between microphone 0 and each of the other three. This gives us a 3D vector that tells us something about the location of the sound relative to the four microphones, but not in a form that is usable. What we really want is a unit vector that points in the correct direction from the center of the mic array. This data structure makes it easy to look up the direction given the array of delays.</p>
<dl class="section author"><dt>Author</dt><dd>Bo Brinkman <a href="#" onclick="location.href='mai'+'lto:'+'dr.'+'bo'+'.br'+'in'+'kma'+'n@'+'gma'+'il'+'.co'+'m'; return false;">dr.bo<span style="display: none;">.nosp@m.</span>.bri<span style="display: none;">.nosp@m.</span>nkman<span style="display: none;">.nosp@m.</span>@gma<span style="display: none;">.nosp@m.</span>il.co<span style="display: none;">.nosp@m.</span>m</a> </dd></dl>
<dl class="section date"><dt>Date</dt><dd>2016-07-28 </dd></dl>
</div><h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="a10eee00d800c82c823371b1d705eaece"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt;float&gt; offsetsForLocation </td>
          <td>(</td>
          <td class="paramtype">std::vector&lt; float &gt;&#160;</td>
          <td class="paramname"><em>pt</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Given a location in world coordinates, calculate the microphone delay offsets for mics 1, 2, and 3.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pt</td><td>coordinates of the point, in meters </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a class="anchor" id="a8d3665864164bf85a14100b11dbba1f5"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">constexpr char FNAME[] = &quot;lut.csv&quot;</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Name of file for caching the lookup table </p>

</div>
</div>
<a class="anchor" id="aa48e29ff287b35f81743235e2e483934"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt;std::vector&lt;float&gt; &gt; MIC_LOCATIONS</td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Initial value:</b><div class="fragment"><div class="line">=</div>
<div class="line">  {</div>
<div class="line">    {0.0f, <a class="code" href="locationlut_8cpp.html#ade2ea6a01089d53d8b6811b9bf521b2f">SENSOR_SPACING_METERS</a>/(2*<a class="code" href="locationlut_8cpp.html#a157ea385f7bd4c903579d7369fa47d6c">SIN_60</a>), 0.0f}, </div>
<div class="line">    {-<a class="code" href="locationlut_8cpp.html#ade2ea6a01089d53d8b6811b9bf521b2f">SENSOR_SPACING_METERS</a>/2, -<a class="code" href="locationlut_8cpp.html#ade2ea6a01089d53d8b6811b9bf521b2f">SENSOR_SPACING_METERS</a>/(2*<a class="code" href="locationlut_8cpp.html#ac324f5e99785ca5b85f73eaef75dc94a">TAN_60</a>), 0.0f}, </div>
<div class="line">    { <a class="code" href="locationlut_8cpp.html#ade2ea6a01089d53d8b6811b9bf521b2f">SENSOR_SPACING_METERS</a>/2, -<a class="code" href="locationlut_8cpp.html#ade2ea6a01089d53d8b6811b9bf521b2f">SENSOR_SPACING_METERS</a>/(2*<a class="code" href="locationlut_8cpp.html#ac324f5e99785ca5b85f73eaef75dc94a">TAN_60</a>), 0.0f}, </div>
<div class="line">    {0.0f, 0.0f, <a class="code" href="locationlut_8cpp.html#ade2ea6a01089d53d8b6811b9bf521b2f">SENSOR_SPACING_METERS</a>}  </div>
<div class="line">  }</div>
<div class="ttc" id="locationlut_8cpp_html_ac324f5e99785ca5b85f73eaef75dc94a"><div class="ttname"><a href="locationlut_8cpp.html#ac324f5e99785ca5b85f73eaef75dc94a">TAN_60</a></div><div class="ttdeci">constexpr float TAN_60</div><div class="ttdef"><b>Definition:</b> locationlut.cpp:58</div></div>
<div class="ttc" id="locationlut_8cpp_html_ade2ea6a01089d53d8b6811b9bf521b2f"><div class="ttname"><a href="locationlut_8cpp.html#ade2ea6a01089d53d8b6811b9bf521b2f">SENSOR_SPACING_METERS</a></div><div class="ttdeci">constexpr float SENSOR_SPACING_METERS</div><div class="ttdef"><b>Definition:</b> locationlut.cpp:48</div></div>
<div class="ttc" id="locationlut_8cpp_html_a157ea385f7bd4c903579d7369fa47d6c"><div class="ttname"><a href="locationlut_8cpp.html#a157ea385f7bd4c903579d7369fa47d6c">SIN_60</a></div><div class="ttdeci">constexpr float SIN_60</div><div class="ttdef"><b>Definition:</b> locationlut.cpp:56</div></div>
</div><!-- fragment --><p>Locations of the 4 microphones relative to the origin, in meters.</p>
<p>Microphones form a tetrahedron, with three mics in a plane parallel to the ground, and one mic above them. The origin is in the plane parallel to the ground, directly under the "up" mic. </p>

</div>
</div>
<a class="anchor" id="ade2ea6a01089d53d8b6811b9bf521b2f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">constexpr float SENSOR_SPACING_METERS = <a class="el" href="constants_8h.html#af864305e5976cac5de959897d2031001">SENSOR_SPACING_INCHES</a>*<a class="el" href="constants_8h.html#ad7c3634d1f0dc7d99360b5956f19c330">METERS_PER_INCH</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Sensor spacing converted to meters </p>

</div>
</div>
<a class="anchor" id="a157ea385f7bd4c903579d7369fa47d6c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">constexpr float SIN_60 = 0.86602540378f</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>sin of 60 degrees </p>

</div>
</div>
<a class="anchor" id="a4742b1e4d3aaead5dfffb573027fddc2"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">constexpr float SPEED_OF_SOUND_SAMPLES_PER_METER</td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Initial value:</b><div class="fragment"><div class="line">= <a class="code" href="constants_8h.html#a12a9d041042ecdb7c0ea6592ca77b75b">SAMPLES_PER_SECOND</a> *</div>
<div class="line">  <a class="code" href="constants_8h.html#ab55537309d9ce9daeced69246d260c98">SPEED_OF_SOUND_SECONDS_PER_METER</a></div>
<div class="ttc" id="constants_8h_html_a12a9d041042ecdb7c0ea6592ca77b75b"><div class="ttname"><a href="constants_8h.html#a12a9d041042ecdb7c0ea6592ca77b75b">SAMPLES_PER_SECOND</a></div><div class="ttdeci">constexpr unsigned int SAMPLES_PER_SECOND</div><div class="ttdef"><b>Definition:</b> constants.h:44</div></div>
<div class="ttc" id="constants_8h_html_ab55537309d9ce9daeced69246d260c98"><div class="ttname"><a href="constants_8h.html#ab55537309d9ce9daeced69246d260c98">SPEED_OF_SOUND_SECONDS_PER_METER</a></div><div class="ttdeci">constexpr float SPEED_OF_SOUND_SECONDS_PER_METER</div><div class="ttdef"><b>Definition:</b> constants.h:53</div></div>
</div><!-- fragment --><p>Speed of sound in terms of how many microphone samples elapse as sound travels one meter </p>

</div>
</div>
<a class="anchor" id="ac324f5e99785ca5b85f73eaef75dc94a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">constexpr float TAN_60 = 1.73205080757f</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>tan of 60 degrees </p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Thu Jul 28 2016 16:11:26 for SoundLocalizationALSA by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.8
</small></address>
</body>
</html>
